(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{689:function(t,e,s){"use strict";s.r(e);var a=s(10),i=Object(a.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("blockquote",[s("p",[t._v("vue3 + pinia + vue-router + vue-cli5 + typescript")])]),t._v(" "),s("h3",{attrs:{id:"开发手册"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#开发手册"}},[t._v("#")]),t._v(" 开发手册")]),t._v(" "),s("ol",[s("li",[t._v("使用"),s("code",[t._v("unplugin-vue-components")]),t._v("及"),s("code",[t._v("unplugin-auto-import")]),t._v(",可以不局部引用vant/vue/vue-router/vuex等模块")]),t._v(" "),s("li",[s("code",[t._v("webpack")]),t._v("配置，全局引入"),s("code",[t._v("scss")]),t._v("变量和混合")]),t._v(" "),s("li",[s("code",[t._v("axios")]),t._v("引入\n"),s("ul",[s("li",[t._v("通用"),s("code",[t._v("request")]),t._v("配置")]),t._v(" "),s("li",[t._v("添加"),s("code",[t._v("config")]),t._v("控制变量的"),s("code",[t._v("ts")]),t._v("兼容")])])])]),t._v(" "),s("h3",{attrs:{id:"问题汇总"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#问题汇总"}},[t._v("#")]),t._v(" 问题汇总")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("全局引入"),s("code",[t._v("css")]),t._v("，避免每个组件引入"),s("code",[t._v("scss")]),t._v("变量 "),s("code",[t._v("sass-loader 版本10+")])])]),t._v(" "),s("li",[s("p",[t._v("生产环境移除log "),s("code",[t._v("terser-webpack-plugin 版本4+")])])]),t._v(" "),s("li",[s("p",[t._v("按需引入"),s("a",{attrs:{href:"https://vant-contrib.gitee.io/vant/#/zh-CN/quickstart",target:"_blank",rel:"noopener noreferrer"}},[t._v("vant3"),s("OutboundLink")],1)])]),t._v(" "),s("li",[s("p",[s("code",[t._v("components.d.ts")]),t._v("使用按需加载"),s("a",{attrs:{href:"https://www.npmjs.com/package/unplugin-vue-components",target:"_blank",rel:"noopener noreferrer"}},[t._v("unplugin-vue-components"),s("OutboundLink")],1),t._v("\n时自动生成，添加到"),s("code",[t._v("tsconfig")]),t._v("及"),s("code",[t._v("git")]),t._v("忽略")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("setup")]),t._v("获取全局变量"),s("code",[t._v("$toast")]),t._v(",使用时每次都需引入（与封装再引用无异，未使用）")]),t._v(" "),s("div",{staticClass:"language-javascript line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[t._v("    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" instance "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getCurrentInstance")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//@ts-ignore")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("instance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("proxy"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("$toast")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"123"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br")])])]),t._v(" "),s("li",[s("p",[t._v("组件"),s("code",[t._v("props")]),t._v(" 如果是对象最好给默认参数，只给"),s("code",[t._v("required")]),t._v("会死循环报错")])]),t._v(" "),s("li",[s("p",[t._v("添加"),s("code",[t._v("router")]),t._v("默认路由配置")])]),t._v(" "),s("li",[s("p",[t._v("页面通用布局，兼容"),s("code",[t._v("ios")]),t._v("底部,兼容上拉加载，"),s("code",[t._v("scroll")]),t._v("方法要使用在"),s("code",[t._v(".page")]),t._v("上，且高度大于屏幕高度")])]),t._v(" "),s("li",[s("p",[t._v("页面切换动画（效果不理想，未使用）")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("keep-alive")]),t._v("，生命周期更换")])]),t._v(" "),s("li",[s("p",[t._v("全局初始化"),s("code",[t._v("Toast")]),t._v("配置，停留时间等")])]),t._v(" "),s("li",[s("p",[s("a",{attrs:{href:"https://www.cnblogs.com/s-w-f/p/16589138.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("shallowRef使用误区"),s("OutboundLink")],1)])]),t._v(" "),s("li",[s("p",[s("code",[t._v("setup")]),t._v("使用"),s("code",[t._v("name")]),t._v("最后方案"),s("a",{attrs:{href:"https://github.com/sxzz/unplugin-vue-macros/tree/main/packages/define-options",target:"_blank",rel:"noopener noreferrer"}},[t._v("define-options"),s("OutboundLink")],1),t._v("；官方提供两种方式"),s("a",{attrs:{href:"https://github.com/vuejs/rfcs/discussions/430#discussioncomment-2333745",target:"_blank",rel:"noopener noreferrer"}},[t._v("setup name"),s("OutboundLink")],1)]),t._v(" "),s("ul",[s("li",[t._v("直接使用文件命名")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://staging-cn.vuejs.org/api/sfc-script-setup.html#usage-alongside-normal-script",target:"_blank",rel:"noopener noreferrer"}},[t._v("两个script"),s("OutboundLink")],1)])])]),t._v(" "),s("li",[s("p",[s("code",[t._v("vue3")]),t._v("在"),s("code",[t._v("chrome")]),t._v("警告"),s("a",{attrs:{href:"https://segmentfault.com/a/1190000010173792",target:"_blank",rel:"noopener noreferrer"}},[t._v("Added non-passive event listener to a scroll-blocking 'touchstart' event"),s("OutboundLink")],1),t._v("，暂未处理")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("ts")]),t._v("使用 ,遍历自己取值("),s("code",[t._v("Recordable")]),t._v(")")])]),t._v(" "),s("li",[s("p",[s("a",{attrs:{href:"https://www.shouce.ren/api/view/a/13261",target:"_blank",rel:"noopener noreferrer"}},[t._v("JSDoc"),s("OutboundLink")],1)])])]),t._v(" "),s("h3",{attrs:{id:"todo"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#todo"}},[t._v("#")]),t._v(" todo")]),t._v(" "),s("ul",{staticClass:"task-list-container"},[s("li",{staticClass:"task-list-item"},[s("p",[s("input",{staticClass:"task-list-item-checkbox",attrs:{type:"checkbox",id:"task-item-0",checked:"checked",disabled:"disabled"}}),s("label",{staticClass:"task-list-item-label",attrs:{for:"task-item-0"}},[t._v(" vuex替换成pinia，参考pinia分支")])])]),t._v(" "),s("li",{staticClass:"task-list-item"},[s("p",[s("input",{staticClass:"task-list-item-checkbox",attrs:{type:"checkbox",id:"task-item-1",checked:"checked",disabled:"disabled"}}),s("label",{staticClass:"task-list-item-label",attrs:{for:"task-item-1"}},[s("code",[t._v("setup")]),t._v("语法糖使用，参数setup分支")])]),t._v(" "),s("ul",{staticClass:"task-list-container"},[s("li",{staticClass:"task-list-item"},[s("input",{staticClass:"task-list-item-checkbox",attrs:{type:"checkbox",id:"task-item-2",checked:"checked",disabled:"disabled"}}),s("label",{staticClass:"task-list-item-label",attrs:{for:"task-item-2"}},[s("a",{attrs:{href:"https://github.com/antfu/unplugin-auto-import",target:"_blank",rel:"noopener noreferrer"}},[t._v("unplugin-auto-import"),s("OutboundLink")],1),t._v(" "),s("code",[t._v("API")]),t._v("自动导入，"),s("code",[t._v("vue")]),t._v("/"),s("code",[t._v("vue-router")]),t._v("/"),s("code",[t._v("@/store")]),t._v("("),s("code",[t._v("unplugin-vue-components")]),t._v("已自动导入"),s("code",[t._v("vant")]),t._v(")")])]),t._v(" "),s("li",{staticClass:"task-list-item"},[s("input",{staticClass:"task-list-item-checkbox",attrs:{type:"checkbox",id:"task-item-3",checked:"checked",disabled:"disabled"}}),s("label",{staticClass:"task-list-item-label",attrs:{for:"task-item-3"}},[t._v(" eslint校验 兼容"),s("code",[t._v("defineExpose")]),t._v("等(升级cli5后已兼容)")])]),t._v(" "),s("li",{staticClass:"task-list-item"},[s("input",{staticClass:"task-list-item-checkbox",attrs:{type:"checkbox",id:"task-item-4",checked:"checked",disabled:"disabled"}}),s("label",{staticClass:"task-list-item-label",attrs:{for:"task-item-4"}},[t._v(" 其他引入 顶级变量定义未使用报错(升级cli5后已兼容)")])])])]),t._v(" "),s("li",{staticClass:"task-list-item"},[s("p",[s("input",{staticClass:"task-list-item-checkbox",attrs:{type:"checkbox",id:"task-item-5",checked:"checked",disabled:"disabled"}}),s("label",{staticClass:"task-list-item-label",attrs:{for:"task-item-5"}},[t._v(" 升级vue-cli5,ts版本也升级(~4.5.5)")])]),t._v(" "),s("ul",{staticClass:"task-list-container"},[s("li",{staticClass:"task-list-item"},[s("input",{staticClass:"task-list-item-checkbox",attrs:{type:"checkbox",id:"task-item-6",checked:"checked",disabled:"disabled"}}),s("label",{staticClass:"task-list-item-label",attrs:{for:"task-item-6"}},[s("code",[t._v("defineProps")]),t._v("在setup语法糖里是否正常显示(升级cli5后已兼容)")])]),t._v(" "),s("li",{staticClass:"task-list-item"},[s("input",{staticClass:"task-list-item-checkbox",attrs:{type:"checkbox",id:"task-item-7",disabled:"disabled"}}),s("label",{staticClass:"task-list-item-label",attrs:{for:"task-item-7"}},[s("code",[t._v("webstorm")]),t._v(" "),s("code",[t._v("projectErrors")]),t._v("报错"),s("code",[t._v("TS1232: An import declaration can only be used at the top level of a namespace or module.")]),t._v(" setup语法糖中import引用(升级cli5后,依然报错,待升级webstorm,"),s("strong",[t._v("升级2022.2.1后依然报错提示")]),t._v(")")])]),t._v(" "),s("li",{staticClass:"task-list-item"},[s("input",{staticClass:"task-list-item-checkbox",attrs:{type:"checkbox",id:"task-item-8",checked:"checked",disabled:"disabled"}}),s("label",{staticClass:"task-list-item-label",attrs:{for:"task-item-8"}},[t._v(" Fn放到types文件夹里时，编辑器不报错，代码打包报错")])]),t._v(" "),s("li",{staticClass:"task-list-item"},[s("input",{staticClass:"task-list-item-checkbox",attrs:{type:"checkbox",id:"task-item-9",checked:"checked",disabled:"disabled"}}),s("label",{staticClass:"task-list-item-label",attrs:{for:"task-item-9"}},[s("code",[t._v("prettier")]),t._v(" 检测到 "),s("code",[t._v("define-options")]),t._v("格式异常(升级cli5后已兼容)")])]),t._v(" "),s("li",{staticClass:"task-list-item"},[s("input",{staticClass:"task-list-item-checkbox",attrs:{type:"checkbox",id:"task-item-10",checked:"checked",disabled:"disabled"}}),s("label",{staticClass:"task-list-item-label",attrs:{for:"task-item-10"}},[t._v(" debounced.ts中"),s("a",{attrs:{href:"https://blog.csdn.net/weixin_42369598/article/details/125000346",target:"_blank",rel:"noopener noreferrer"}},[t._v("setTimeout"),s("OutboundLink")],1),t._v("报错(升级cli5后已兼容)")])]),t._v(" "),s("li",{staticClass:"task-list-item"},[s("input",{staticClass:"task-list-item-checkbox",attrs:{type:"checkbox",id:"task-item-11",checked:"checked",disabled:"disabled"}}),s("label",{staticClass:"task-list-item-label",attrs:{for:"task-item-11"}},[t._v(" webpack4 vs webpack5 迁移")]),t._v(" "),s("ul",{staticClass:"task-list-container"},[s("li",{staticClass:"task-list-item"},[s("input",{staticClass:"task-list-item-checkbox",attrs:{type:"checkbox",id:"task-item-12",checked:"checked",disabled:"disabled"}}),s("label",{staticClass:"task-list-item-label",attrs:{for:"task-item-12"}},[s("code",[t._v("overlay")]),t._v("移到"),s("code",[t._v("client")]),t._v("内")])]),t._v(" "),s("li",{staticClass:"task-list-item"},[s("input",{staticClass:"task-list-item-checkbox",attrs:{type:"checkbox",id:"task-item-13",checked:"checked",disabled:"disabled"}}),s("label",{staticClass:"task-list-item-label",attrs:{for:"task-item-13"}},[s("code",[t._v("disableHostCheck")]),t._v("改成"),s("code",[t._v("allowedHosts")])])]),t._v(" "),s("li",{staticClass:"task-list-item"},[s("input",{staticClass:"task-list-item-checkbox",attrs:{type:"checkbox",id:"task-item-14",checked:"checked",disabled:"disabled"}}),s("label",{staticClass:"task-list-item-label",attrs:{for:"task-item-14"}},[s("code",[t._v("client")]),t._v("内"),s("code",[t._v("progress")]),t._v("编译进度")])])])]),t._v(" "),s("li",{staticClass:"task-list-item"},[s("input",{staticClass:"task-list-item-checkbox",attrs:{type:"checkbox",id:"task-item-15",checked:"checked",disabled:"disabled"}}),s("label",{staticClass:"task-list-item-label",attrs:{for:"task-item-15"}},[t._v(" webpack5 优化")]),t._v(" "),s("ul",{staticClass:"task-list-container"},[s("li",{staticClass:"task-list-item"},[s("input",{staticClass:"task-list-item-checkbox",attrs:{type:"checkbox",id:"task-item-16",checked:"checked",disabled:"disabled"}}),s("label",{staticClass:"task-list-item-label",attrs:{for:"task-item-16"}},[t._v(" 开启1500毫秒聚合编译，防止编辑器格式化代码导致重复构建")])]),t._v(" "),s("li",{staticClass:"task-list-item"},[s("input",{staticClass:"task-list-item-checkbox",attrs:{type:"checkbox",id:"task-item-17",checked:"checked",disabled:"disabled"}}),s("label",{staticClass:"task-list-item-label",attrs:{for:"task-item-17"}},[s("code",[t._v("cache")]),t._v("开启二次启动缓存优化")])]),t._v(" "),s("li",{staticClass:"task-list-item"},[s("input",{staticClass:"task-list-item-checkbox",attrs:{type:"checkbox",id:"task-item-18",checked:"checked",disabled:"disabled"}}),s("label",{staticClass:"task-list-item-label",attrs:{for:"task-item-18"}},[s("code",[t._v("SpeedMeasurePlugin")]),t._v("webpack打包分析")])])])])])])]),t._v(" "),s("h3",{attrs:{id:"pinia-替换-vuex4-x"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#pinia-替换-vuex4-x"}},[t._v("#")]),t._v(" pinia 替换 vuex4.x")]),t._v(" "),s("blockquote",[s("p",[s("code",[t._v("vuex")]),t._v(" vs "),s("code",[t._v("pinia")]),t._v(" Compared to Vuex, Pinia provides a simpler API with less ceremony, offers Composition-API-style\nAPIs, and most importantly, has solid type inference support when used with TypeScript.")])]),t._v(" "),s("p",[s("code",[t._v("vuex4.x")]),t._v(" 劣势")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("ts")]),t._v("支持不好,要写一堆接口,有些是"),s("code",[t._v("vuex")]),t._v("自带的方法")]),t._v(" "),s("li",[t._v("模块化后"),s("code",[t._v("state")]),t._v("不能合并，提示异常")]),t._v(" "),s("li",[t._v("使用不方便 "),s("code",[t._v("injection")]),t._v(" "),s("code",[t._v("key")]),t._v("（可封装）")])]),t._v(" "),s("p",[s("code",[t._v("pinia")]),t._v(" 比较")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("mutations")]),t._v("移除")]),t._v(" "),s("li",[t._v("更好的"),s("code",[t._v("ts")]),t._v("支持")]),t._v(" "),s("li",[t._v("使用方便，不用注入"),s("code",[t._v("key")])]),t._v(" "),s("li",[t._v("扁平化模块")]),t._v(" "),s("li",[t._v("无需命名空间")])]),t._v(" "),s("p",[t._v("替换问题")]),t._v(" "),s("ul",[s("li",[t._v("组合式API中使用pinia，注册pinia在初始化之后，导致组合式API中getters拿不到初始值报错")]),t._v(" "),s("li",[t._v("自动引入API")]),t._v(" "),s("li",[t._v("vue tools使用")]),t._v(" "),s("li",[s("code",[t._v("$reset")]),t._v("使用时只恢复没有"),s("code",[t._v("muations")]),t._v("前的数据，如果初始化从"),s("code",[t._v("localstorage")]),t._v("获取赋值了，是清空不了的")])]),t._v(" "),s("h3",{attrs:{id:"vue-vs-typescript"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vue-vs-typescript"}},[t._v("#")]),t._v(" vue vs typescript")]),t._v(" "),s("ul",[s("li",[t._v("Vue2.x 最令人诟病的一点就是对 Typescript 的羸弱支持，其根源也在于 vue2.x 的 api 大量使用了 this，造成其类型难以推断，Vue2.5\n通过 ThisType 对 vue 的 typescript 支持进行了一波增强，但还是有不足之处，")]),t._v(" "),s("li",[t._v("Vue3 的一个大的卖点也是改进了增强了对\nTypescript 的支持。\n"),s("ul",[s("li",[s("a",{attrs:{href:"https://cn.vuejs.org/guide/typescript/composition-api.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("组合式API与ts使用"),s("OutboundLink")],1)])])])]),t._v(" "),s("h3",{attrs:{id:"编辑器对比"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#编辑器对比"}},[t._v("#")]),t._v(" 编辑器对比")]),t._v(" "),s("h4",{attrs:{id:"vs-code"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vs-code"}},[t._v("#")]),t._v(" VS code")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("typescript")]),t._v(" 支持度比较好，比如"),s("code",[t._v(".vue``template")]),t._v("内的检测")]),t._v(" "),s("li",[t._v("社区活跃，支持各种插件")]),t._v(" "),s("li",[t._v("轻便，不占内存")]),t._v(" "),s("li",[t._v("markdown支持lint校验，统一样式")])]),t._v(" "),s("h4",{attrs:{id:"webstorm"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#webstorm"}},[t._v("#")]),t._v(" webstorm")]),t._v(" "),s("ul",[s("li",[t._v("集成度比较高，开箱即用")]),t._v(" "),s("li",[s("code",[t._v("git")]),t._v("模块yyds，支持分支对比等实用功能")]),t._v(" "),s("li",[s("code",[t._v("webstorm compile")]),t._v("编译js，可以手动控制需要编译查看的文件")]),t._v(" "),s("li",[s("code",[t._v("SFC")]),t._v("内"),s("code",[t._v("template")]),t._v("的"),s("code",[t._v("ts")]),t._v("兼容不好，比如："),s("code",[t._v("vant")]),t._v("组件内的"),s("code",[t._v("v-model")]),t._v("及数据引用校验")])])])}),[],!1,null,null,null);e.default=i.exports}}]);